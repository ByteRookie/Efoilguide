<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>eFoil Guide</title>
<link rel="stylesheet" href="css/style.1.0.0.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
<link rel="icon" type="image/png" sizes="32x32" href="data/img/site%20icon/favicon-black-32x32.png" media="(prefers-color-scheme: light)">
<link rel="icon" type="image/png" sizes="16x16" href="data/img/site%20icon/favicon-black-16x16.png" media="(prefers-color-scheme: light)">
<link rel="icon" type="image/png" sizes="32x32" href="data/img/site%20icon/favicon-white-32x32.png" media="(prefers-color-scheme: dark)">
<link rel="icon" type="image/png" sizes="16x16" href="data/img/site%20icon/favicon-white-16x16.png" media="(prefers-color-scheme: dark)">
</head>
<body>
<header>
  <div class="wrap">
    <div class="header-row">
      <h1>
        <picture>
          <source srcset="data/img/site%20icon/icon_white.svg" media="(prefers-color-scheme: dark)">
          <img src="data/img/site%20icon/icon_black.svg" alt="eFoil Guide" class="logo" />
        </picture>
      </h1>
      <div class="search-wrap">
        <input id="q" placeholder="Search all details" aria-label="Search spots" />
        <button id="qClear" class="hidden" aria-label="Clear search">‚úï</button>
        <ul id="qSuggest" class="hidden" role="listbox"></ul>
      </div>
      <div class="settings">
        <button id="searchToggle" aria-label="Search">üîç</button>
        <button id="editLocation" aria-label="Change location">üìç</button>
        <button id="filterBtn" aria-label="Filters">‚öô</button>
        <button id="infoBtn" aria-label="Regulatory quick-reference">‚Ñπ</button>
        <span id="locationBox" class="hidden" aria-hidden="true">
          <div class="loc-row">
            <input id="zip" inputmode="numeric" pattern="[0-9]*" maxlength="5" placeholder="ZIP" aria-label="ZIP code" />
            <button id="zipClear" class="hidden" aria-label="Clear ZIP">‚úï</button>
            <a id="useGeo" href="#" title="Use device location">Use device location</a>
          </div>
          <div id="originMsg" class="hint">Set your origin to sort by distance &amp; ETA. Your address is never stored.</div>
        </span>
      </div>
    </div>
    <div id="filters" class="controls hidden">
      <div class="control">
        <div class="legend-row">
          <div class="chip-group">
            <span class="chip-group-label">Water:</span>
            <span class="chip f-water active b-salt" data-value="salt">Salt</span>
            <span class="chip f-water active b-fresh" data-value="fresh">Fresh</span>
            <span class="chip f-water active b-brack" data-value="brackish">Brackish</span>
          </div>
          <div class="chip-group">
            <span class="chip-group-label">Season:</span>
            <span class="chip f-season active b-yr" data-value="year">Year‚Äëround</span>
            <span class="chip f-season active b-sprfall" data-value="spring-fall">Spring‚ÄìFall</span>
            <span class="chip f-season active b-sum" data-value="summer">Summer</span>
          </div>
          <div class="chip-group">
            <span class="chip-group-label">Skill:</span>
            <span class="chip f-skill active b-lvle" data-value="B">Beginner</span>
            <span class="chip f-skill active b-lvlm" data-value="I">Intermediate</span>
            <span class="chip f-skill active b-lvlh" data-value="A">Advanced</span>
          </div>
          <div class="chip-group chip-group-flex">
            <input id="mins" type="range" min="15" max="180" step="5" value="180">
            <span class="hint" id="minsVal">‚â§ 180 min</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>

<main id="main">
  <div id="map"></div>
  <div id="tablePanel" class="panel" role="dialog" aria-modal="true" aria-hidden="true">
    <div id="panelButtons">
      <button id="togglePanelSize" aria-label="Expand">‚§¢</button>
      <button id="closePanel" aria-label="Close">‚úï</button>
    </div>
    <div class="table-wrap">
      <table id="tbl">
        <colgroup>
          <col class="c-name">
          <col class="c-dist">
          <col class="c-water">
          <col class="c-season">
          <col class="c-skill">
        </colgroup>
        <thead>
          <tr>
            <th class="sortable" data-sort="name">Spot</th>
            <th class="sortable" data-sort="dist" aria-sort="ascending">
              <span>Dist / Time</span>
              <span class="tip-wrap">
                <button class="info-btn" type="button" aria-label="ETA calculation info">
                  <svg viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="16" x2="12" y2="12"></line>
                    <line x1="12" y1="8" x2="12.01" y2="8"></line>
                  </svg>
                </button>
                <span class="tooltip-box hidden" role="tooltip">ETAs use a simple urban/highway model; check your nav app for exact routing.</span>
              </span>
              <span id="sortArrow">‚áÖ</span>
            </th>
            <th class="sortable" data-sort="water">Water</th>
            <th class="sortable" data-sort="season">Season</th>
            <th class="sortable" data-sort="skill">Skill</th>
          </tr>
        </thead>
        <tbody id="spotsBody"></tbody>
      </table>
    </div>
    <div id="panelGrip"></div>
  </div>
  <div id="selectedWrap" class="hidden bottom-sheet" role="dialog" aria-modal="true" aria-hidden="true">
    <div id="selectedTop">
      <div id="selectedTopScroll">
        <table>
          <tbody id="selectedTopBody"></tbody>
        </table>
      </div>
      <div id="selectedButtons">
        <button id="toggleSheetSize" aria-label="Expand">‚§¢</button>
        <button id="closeSelected" aria-label="Close">‚úï</button>
      </div>
    </div>
    <div id="selectedDetail"><div id="selectedDetailScroll"><table><tbody id="selectedBody"></tbody></table></div></div>
    <div id="sheetWidthGrip"></div>
    <div id="sheetHeightGrip"></div>
  </div>
</main>

<footer id="siteFooter">¬© <a href="https://github.com/byterookie" target="_blank">byterookie</a> <span id="year"></span> ‚Äî This guide summarizes practical rules. Local postings and harbor patrol instructions always take precedence.</footer>


<div id="infoPopup" class="hidden" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="info-inner">
    <button id="closeInfo" aria-label="Close">‚úï</button>
    <div class="welcome">
      <h2>Welcome</h2>
      <p>This community-built guide brings together data from public records, local agencies, and rider contributions. It‚Äôs meant as a starting point‚Äînot an official rulebook. Conditions, regulations, and access rules can change quickly, and some spots may be seasonally closed or unsafe.</p>
      <p>üëâ Always confirm with local authorities, check current weather and tides, and decide whether a location is appropriate for your skill level and equipment.</p>
      <p>Please follow the citations to verify details and get the most up-to-date guidance.</p>
    </div>

    <h3>Regulatory Quick-Reference</h3>

    <h4>Harbors &amp; Marinas</h4>
    <ul>
      <li>No-wake zones (5&nbsp;mph or less) usually apply inside marina basins and fairways until you‚Äôre outside the breakwater.</li>
      <li>Launch and land only at designated ramps or beaches.</li>
    </ul>

    <h4>California State Proximity Rules (baseline)</h4>
    <ul>
      <li>5&nbsp;mph within ~100&nbsp;ft of swimmers.</li>
      <li>5&nbsp;mph within ~200&nbsp;ft of beaches, docks, and moored vessels.</li>
      <li>Obey any posted signs‚Äîlocal restrictions may be stricter.</li>
    </ul>

    <h4>Navigation Rules (COLREGS ‚Äì ‚ÄúRules of the Road‚Äù)</h4>
    <ul>
      <li>Apply on all navigable waters, including bays, rivers, and coastal waters.</li>
      <li>Give way to larger vessels constrained by draft (ships, ferries, tugs).</li>
      <li>Cross channels at right angles when safe.</li>
      <li>Ride only in daylight when visibility is good. If caught out after dusk: show a white light and avoid high-traffic areas.</li>
    </ul>

    <h4>Sanctuaries &amp; Wildlife Protection</h4>
    <ul>
      <li>Keep a minimum 300&nbsp;ft from whales, 150&nbsp;ft from seals/sea lions, and avoid disturbing seabird colonies.</li>
      <li>Do not chase or encircle marine mammals.</li>
      <li>Watch for eelgrass protection zones (e.g., Richardson Bay, Tomales Bay) and avoid shallow vegetated flats.</li>
    </ul>

    <h4>Inland Lakes &amp; Reservoirs</h4>
    <ul>
      <li>Expect quagga/zebra mussel inspections: arrive clean, drained, and dry.</li>
      <li>Limited to day-use hours; many lakes close at sunset.</li>
      <li>Watch for seasonal algae blooms‚Äîsome can be hazardous to health.</li>
    </ul>

    <h4>Lighting &amp; Right-of-Way (if night is unavoidable)</h4>
    <ul>
      <li>Keep to the right of oncoming traffic.</li>
      <li>Pass other boats on their stern/white light side.</li>
      <li>If you see red/green bow lights ahead, stay clear‚Äîthey‚Äôre moving toward you.</li>
    </ul>

    <p class="hint"><strong>‚ö†Ô∏è Important:</strong> This guide summarizes practical rules, but local postings, harbor patrols, and Coast Guard instructions always take precedence.</p>
  </div>
</div>

  <script src="https://unpkg.com/dompurify@3.0.6/dist/purify.min.js" defer></script>
  <script src="js/parseCitations.js" defer></script>
  <script src="js/main.1.0.0.js" defer></script>

</body>
</html>
